{
    "version": "2.4.0",
    "description": "Image uploader/manager",
    "homepage": "https://picgo.github.io/PicGo-Doc/en/",
    "license": "MIT",
    "architecture": {
        "64bit": {
            "url": "https://github.com/Molunerfinn/PicGo/releases/download/v2.4.0/PicGo-Setup-2.4.0-x64.exe#/dl.7z",
            "hash": "sha512:241fca9d5ce81b3e2f4ba31f246aef8608bc1aca163d67dd6306b98bb532d4f36d82c2aaa3ac52f531a5fe4e2ecab2d9d686b29020152f38c8d852358bd408e0",
            "pre_install": [
                "Expand-7zipArchive \"$dir\\`$PLUGINSDIR\\app-64.7z\" \"$dir\"",
                "Remove-Item \"$dir\\`$*\", \"$dir\\Uninstall*\" -Recurse",
                "$picgoDataDir = \"$dir\\data\"",
                "if (!(Test-Path $picgoDataDir)) {",
                "    New-Item -ItemType Directory -Path $picgoDataDir -Force",
                "}",
                "$appDataPicGo = \"$env:APPDATA\\picgo\"",
                "if (Test-Path $appDataPicGo) {",
                "    if ((Get-Item $appDataPicGo -Force).LinkType -ne 'SymbolicLink') {",
                "        Copy-Item \"$appDataPicGo\\*\" $picgoDataDir -Force -Recurse",
                "    }",
                "    Remove-Item $appDataPicGo -Force -Recurse -ErrorAction SilentlyContinue",
                "}",
                "try {",
                "    New-Item -ItemType SymbolicLink -Path $appDataPicGo -Target $picgoDataDir -Force -ErrorAction Stop",
                "} catch {",
                "    if ($_.Exception -match 'Privilege not held') {",
                "        throw 'Administrator privileges required to create symbolic links. Installation cannot proceed.'",
                "    } else {",
                "        throw $_.Exception.Message",
                "    }",
                "}"
            ]
        },
        "32bit": {
            "url": "https://github.com/Molunerfinn/PicGo/releases/download/v2.4.0/PicGo-Setup-2.4.0-ia32.exe#/dl.7z",
            "hash": "sha512:75bbb8aba52cb319a839596c728187a8d929cc0cfaf7bca686275fe43f94b14797c85023b01354ccb3c1d162f8f2956ee3476b1985686ca46e30b5d6d8b653c8",
            "pre_install": [
                "Expand-7zipArchive \"$dir\\`$PLUGINSDIR\\app-32.7z\" \"$dir\"",
                "Remove-Item \"$dir\\`$*\", \"$dir\\Uninstall*\" -Recurse",
                "$picgoDataDir = \"$dir\\data\"",
                "if (!(Test-Path $picgoDataDir)) {",
                "    New-Item -ItemType Directory -Path $picgoDataDir -Force",
                "}",
                "$appDataPicGo = \"$env:APPDATA\\picgo\"",
                "if (Test-Path $appDataPicGo) {",
                "    if ((Get-Item $appDataPicGo -Force).LinkType -ne 'SymbolicLink') {",
                "        Copy-Item \"$appDataPicGo\\*\" $picgoDataDir -Force -Recurse",
                "    }",
                "    Remove-Item $appDataPicGo -Force -Recurse -ErrorAction SilentlyContinue",
                "}",
                "try {",
                "    New-Item -ItemType SymbolicLink -Path $appDataPicGo -Target $picgoDataDir -Force -ErrorAction Stop",
                "} catch {",
                "    if ($_.Exception -match 'Privilege not held') {",
                "        throw 'Administrator privileges required to create symbolic links. Installation cannot proceed.'",
                "    } else {",
                "        throw $_.Exception.Message",
                "    }",
                "}"
            ]
        }
    },
    "bin": "PicGo.exe",
    "shortcuts": [
        [
            "PicGo.exe",
            "PicGo"
        ]
    ],
    "persist": "data",
    "checkver": {
        "url": "https://github.com/Molunerfinn/PicGo/releases",
        "regex": "/PicGo-Setup-([\\d.]+)-(x64|ia32)\\.exe"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/Molunerfinn/PicGo/releases/download/v$version/PicGo-Setup-$version-x64.exe#/dl.7z"
            },
            "32bit": {
                "url": "https://github.com/Molunerfinn/PicGo/releases/download/v$version/PicGo-Setup-$version-ia32.exe#/dl.7z"
            }
        },
        "hash": {
            "url": "$baseurl/latest.yml",
            "regex": "(?s)$basename.*?$base64"
        }
    }
}
